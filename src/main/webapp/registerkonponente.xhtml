<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:form id="registerForm">
        
        <p:panel header="Register" styleClass="create-ride-container">

            <p:messages id="messages" globalOnly="true" closable="true" />

            <p:fieldset legend="Account Details" styleClass="fieldset-spacer">
                <p:panelGrid columns="3" styleClass="ui-panelgrid-blank full-width">
                    
                    <p:outputLabel for="username" value="User:" />
                    <p:inputText id="username" styleClass="full-width-input"
                                 required="true" requiredMessage="User is required" 
                                 value="#{register.username}"/> 
                    <p:message for="username" />
                    
                    <p:outputLabel for="password" value="Password:" />
                    <p:password id="password" styleClass="full-width-input"
                                required="true" requiredMessage="Password is required" 
                                value="#{register.password}"/>
                    <p:message for="password" />

                    <p:outputLabel for="userType" value="Account Type:" />
                    <p:selectOneRadio id="userType" layout="lineDirection" value="#{register.userType}">
                        <f:selectItem itemLabel="Traveller" itemValue="traveller" />
                        <f:selectItem itemLabel="Driver" itemValue="driver" />
                    </p:selectOneRadio>
                    <p:message for="userType" />
                
                </p:panelGrid>
            </p:fieldset>

            <p:fieldset legend="Personal Information">
                <p:panelGrid columns="3" styleClass="ui-panelgrid-blank full-width">

                    <p:outputLabel for="name" value="Name:" />
                    <p:inputText id="name" styleClass="full-width-input"
                                 required="true" requiredMessage="Name is required"
                                 validatorMessage="Name must contain only letters and spaces"
                                 value="#{register.name}">
                        <f:validateRegex pattern="^[a-zA-Z ]+$" />
                    </p:inputText>
                    <p:message for="name" />

                    <p:outputLabel for="surname" value="Surname:" />
                    <p:inputText id="surname" styleClass="full-width-input"
                                 required="true" requiredMessage="Surname is required"
                                 validatorMessage="Surname must contain only letters and spaces"
                                 value="#{register.surname}">
                        <f:validateRegex pattern="^[a-zA-Z ]+$" />
                    </p:inputText>
                    <p:message for="surname" />

                    <p:outputLabel for="email" value="Email:" />
                    <p:inputText id="email" styleClass="full-width-input"
                                 validatorMessage="Email format is invalid (e: user@example.com)"
                                 value="#{register.email}">
                        <f:validateRegex pattern="^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$" />
                    </p:inputText>
                    <p:message for="email" />

                    <p:outputLabel for="phone" value="Phone:" />
                    <p:inputText id="phone" styleClass="full-width-input"
                                 required="true" requiredMessage="Phone is required"
                                 validatorMessage="Phone must be exactly 9 digits"
                                 value="#{register.phone}">
                        <f:validateRegex pattern="^[0-9]+$" />
                        <f:validateLength minimum="9" maximum="9" />
                    </p:inputText>
                    <p:message for="phone" />

                </p:panelGrid>
            </p:fieldset>

            <f:facet name="footer">
                <div class="center-buttons">
                    <p:commandButton value="Register" 
                                     action="#{register.register}" 
                                     icon="pi pi-user-plus" 
                                     styleClass="ui-button-success btn-wide btn-margin-right"
                                     update="@form" />
                    
                    <p:button value="Back" 
                              outcome="login" 
                              icon="pi pi-arrow-left" 
                              styleClass="ui-button-secondary btn-wide" />
                </div>
            </f:facet>
            
        </p:panel>
    </h:form>

</ui:composition>